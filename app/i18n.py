from fastapi import Request

LANGUAGES = {
    "en": {
        "app_title": "Web-DL-Manager",
        "intro_text": "Web-DL-Manager is a simple and efficient download manager designed to provide you with a convenient gallery downloading and automated storage backup experience.",
        "url_label": "URL",
        "url_placeholder": "e.g., https://www.deviantart.com/username/gallery/all or https://kemono.cr/patreon/user/47335841/post/141289985",
        "downloader_label": "Downloader",
        "downloader_gallery_dl": "gallery-dl (Default)",
        "downloader_megadl": "megadl (MEGA.nz)",
        "advanced_options_title": "Advanced Options",
        "deviantart_credentials_title": "DeviantArt Credentials (Optional)",
        "deviantart_credentials_text": "Provide your own DeviantArt API credentials to avoid rate limits.",
        "how_to_get_them": "How to get them?",
        "client_id_label": "Client ID",
        "client_secret_label": "Client Secret",
        "rate_limit_title": "Rate Limit",
        "rate_limit_text": "Limit download and upload speed (e.g., 500K, 2M).",
        "upload_rate_limit_text": "Limit upload speed (e.g., 500K, 2M).",
        "rate_limit_label": "Rate Limit",
        "mega_rate_limit_label": "MEGA Download Limit (MB/s)",
        "mega_rate_limit_text": "Limit MEGA download speed in MB/s.",
        "proxy_text": "Use a proxy to bypass IP blocks (e.g., from CloudFront).",
        "proxy_label": "Proxy URL",
        "proxy_placeholder": "e.g., http://user:pass@host:port",
        "upload_config_title": "Upload Configuration",
        "upload_service_label": "Upload Service",
        "select_service_option": "-- Select a Service --",
        "webdav_option": "WebDAV",
        "s3_option": "S3 Compatible",
        "b2_option": "Backblaze B2",
        "gofile_option": "gofile.io",
        "mega_option": "MEGA",
        "remote_upload_path_label": "Remote Upload Path/Bucket",
        "remote_upload_path_placeholder": "e.g., my-bucket/archives",
        "webdav_settings_title": "WebDAV Settings",
        "webdav_url_label": "WebDAV URL",
        "webdav_url_placeholder": "e.g., https://your-server.com/remote.php/dav/files/username",
        "webdav_username_label": "WebDAV Username",
        "webdav_password_label": "WebDAV Password",
        "s3_settings_title": "S3 Settings",
        "s3_provider_label": "S3 Provider",
        "s3_provider_placeholder": "AWS",
        "access_key_id_label": "Access Key ID",
        "secret_access_key_label": "Secret Access Key",
        "region_label": "Region",
        "region_placeholder": "us-east-1",
        "endpoint_url_label": "Endpoint URL (optional)",
        "endpoint_url_placeholder": "e.g., https://s3.custom.com",
        "b2_settings_title": "Backblaze B2 Settings",
        "account_id_label": "Account ID or Application Key ID",
        "application_key_label": "Application Key",
        "gofile_settings_title": "gofile.io Settings",
        "api_token_label": "API Token (optional)",
        "gofile_folder_id_label": "Folder ID (optional)",
        "start_download_button": "Start Download",
        "powered_by": "Powered by gallery-dl, FastAPI, rclone, and zstd.",
        "job_status_title": "Job Status",
        "task_id_label": "Task ID:",
        "auto_refresh_label": "Auto-refresh",
        "copy_button": "Copy",
        "copied_button": "Copied!",
        "start_new_job_button": "Start New Job",
        "service_unavailable_title": "Service Unavailable",
        "service_unavailable_message": "Please access through your designated login page.",
        "url_and_service_required": "URL and Upload Service are required.",
        "upload_path_required": "Upload Path is required for this service.",
        "job_not_found": "Job not found.",
        "cloudflare_tunnel_title": "Cloudflare Tunnel",
        "cloudflared_token_label": "Cloudflared Token",
        "start_tunnel_button": "Start Tunnel",
        "stop_tunnel_button": "Stop Tunnel",
        "tunnel_status_title": "Tunnel Status",
        "enable_compression_label": "Enable Compression",
        "split_compression_label": "Split Compression",
        "split_size_label": "Split Size (MB)",
        "all_tasks_title": "All Tasks",
        "no_tasks_found": "No tasks found.",
        "download_log_label": "Download Log",
        "upload_log_label": "Upload Log",
        "upload_progress_label": "Upload Progress",
        "upload_speed_label": "Upload Speed",
        "download_speed_label": "Download Speed",
        "files_count_label": "Files",
        "show_logs_button": "Show Logs",
        "hide_logs_button": "Hide Logs",
        "task_url_label": "URL:",
        "task_command_label": "Command:",
        "task_error_label": "Error:",
        "task_gofile_link_label": "Gofile Link:",
        "pause_button": "Pause",
        "resume_button": "Resume",
        "retry_button": "Retry",
        "view_log_button": "View Log",
        "delete_button": "Delete",
        "delete_task_confirm": "Are you sure you want to delete this task?",
        "change_password_title": "Change Password",
        "current_password_label": "Current Password",
        "new_password_label": "New Password",
        "confirm_password_label": "Confirm New Password",
        "change_password_button": "Change Password",
        "back_to_downloader": "Back to Downloader",
        "password_changed_success": "Password changed successfully.",
        "current_password_incorrect": "Current password is incorrect.",
        "passwords_not_match": "New password and confirmation do not match.",
        "password_empty": "New password cannot be empty.",
        "password_update_failed": "Failed to update password. Please try again.",
        "mega_settings_title": "MEGA Settings",
        "mega_email_label": "MEGA Email",
        "mega_password_label": "MEGA Password",
        "mega_2fa_label": "MEGA 2FA Code (Optional)",
        "mega_2fa_placeholder": "Enter 2FA code if enabled",
        "login_error": "Invalid username or password",
        "user_not_found": "User not found",
        "password_incorrect": "Password is incorrect",
        "settings_title": "Settings",
        "system_settings_title": "System Settings",
        "save_settings_button": "Save Settings",
        "settings_saved_success": "Settings saved successfully.",
        "settings_update_failed": "Failed to update settings.",
        "general_settings_section": "General Settings",
        "storage_services_section": "Storage Services",
        "backup_settings_section": "Backup & System Settings",
        "login_domain_label": "Login Domain (Camouflage)",
        "private_mode_label": "Private Mode",
        "debug_mode_label": "Debug Mode",
        "github_token_label": "GitHub Token (for Updates)",
        "backup_rclone_base64_label": "Rclone Config (Base64)",
        "backup_remote_path_label": "Backup Remote Path",
        "clear_cache_button": "Clear System Cache",
        "cache_cleared_success": "System cache cleared successfully.",
        "cache_clearing_label": "Cache Management",
        "cache_clearing_text": "Manually clear in-memory caches for configuration, users, and task status.",
    },
    "zh": {
        "app_title": "Web-DL-Manager",
        "intro_text": "Web-DL-Manager 是一个简单高效的下载管理工具，旨在为您提供便捷的画廊下载与自动化存储备份体验。",
        "url_label": "网址",
        "url_placeholder": "例如：https://www.deviantart.com/username/gallery/all 或 https://kemono.cr/patreon/user/47335841/post/141289985",
        "downloader_label": "下载器",
        "downloader_gallery_dl": "gallery-dl (默认)",
        "downloader_megadl": "megadl (MEGA.nz)",
        "advanced_options_title": "高级选项",
        "deviantart_credentials_title": "DeviantArt 凭证 (可选)",
        "deviantart_credentials_text": "提供您自己的 DeviantArt API 凭证以避免速率限制。",
        "how_to_get_them": "如何获取？",
        "client_id_label": "客户端 ID",
        "client_secret_label": "客户端密钥",
        "rate_limit_title": "速度限制",
        "rate_limit_text": "限制下载和上传速度 (例如, 500K, 2M).",
        "upload_rate_limit_text": "限制上传速度 (例如, 500K, 2M).",
        "rate_limit_label": "速度限制",
        "mega_rate_limit_label": "MEGA 下载速度限制 (MB/s)",
        "mega_rate_limit_text": "限制 MEGA 下载速度，单位为 MB/s。",
        "proxy_text": "使用代理绕过 IP 封锁（例如来自 CloudFront）。",
        "proxy_label": "代理 URL",
        "proxy_placeholder": "例如：http://user:pass@host:port",
        "auto_proxy_label": "从公共列表自动选择代理",
        "disclaimer_title": "免责声明:",
        "disclaimer_text": "此功能使用来自第三方的公共代理。使用公共代理存在固有的安全和隐私风险。您的流量可能被监控，您的数据可能被代理运营商拦截。使用此功能风险自负。我们不对可能发生的任何损害或数据丢失负责。",
        "upload_config_title": "上传配置",
        "upload_service_label": "上传服务",
        "select_service_option": "-- 选择一个服务 --",
        "webdav_option": "WebDAV",
        "s3_option": "S3 兼容",
        "b2_option": "Backblaze B2",
        "gofile_option": "gofile.io",
        "mega_option": "MEGA",
        "remote_upload_path_label": "远程上传路径/存储桶",
        "remote_upload_path_placeholder": "例如：my-bucket/archives",
        "webdav_settings_title": "WebDAV 设置",
        "webdav_url_label": "WebDAV URL",
        "webdav_url_placeholder": "例如：https://your-server.com/remote.php/dav/files/username",
        "webdav_username_label": "WebDAV 用户名",
        "webdav_password_label": "WebDAV 密码",
        "s3_settings_title": "S3 设置",
        "s3_provider_label": "S3 提供商",
        "s3_provider_placeholder": "AWS",
        "access_key_id_label": "访问密钥 ID",
        "secret_access_key_label": "秘密访问密钥",
        "region_label": "区域",
        "region_placeholder": "us-east-1",
        "endpoint_url_label": "端点 URL (可选)",
        "endpoint_url_placeholder": "例如：https://s3.custom.com",
        "b2_settings_title": "Backblaze B2 设置",
        "account_id_label": "账户 ID 或应用程序密钥 ID",
        "application_key_label": "应用程序密钥",
        "gofile_settings_title": "gofile.io 设置",
        "api_token_label": "API 令牌 (可选)",
        "gofile_folder_id_label": "文件夹 ID (可选)",
        "start_download_button": "开始下载",
        "powered_by": "由 gallery-dl, FastAPI, rclone 和 zstd 提供支持。",
        "job_status_title": "任务状态",
        "task_id_label": "任务 ID:",
        "auto_refresh_label": "自动刷新",
        "copy_button": "复制",
        "copied_button": "已复制!",
        "start_new_job_button": "开始新任务",
        "service_unavailable_title": "服务不可用",
        "service_unavailable_message": "请通过您指定的登录页面访问。",
        "url_and_service_required": "网址和上传服务是必需的。",
        "upload_path_required": "此服务需要上传路径。",
        "job_not_found": "任务未找到。",
        "cloudflare_tunnel_title": "Cloudflare 隧道",
        "cloudflared_token_label": "Cloudflared 令牌",
        "start_tunnel_button": "启动隧道",
        "stop_tunnel_button": "停止隧道",
        "tunnel_status_title": "隧道状态",
        "enable_compression_label": "启用压缩",
        "split_compression_label": "分卷压缩",
        "split_size_label": "分卷大小 (MB)",
        "all_tasks_title": "所有任务",
        "no_tasks_found": "未找到任何任务。",
        "download_log_label": "下载日志",
        "upload_log_label": "上传日志",
        "upload_progress_label": "上传进度",
        "upload_speed_label": "上行速率",
        "download_speed_label": "下行速率",
        "files_count_label": "文件数",
        "show_logs_button": "显示日志",
        "hide_logs_button": "隐藏日志",
        "task_url_label": "网址:",
        "task_command_label": "命令:",
        "task_error_label": "错误:",
        "task_gofile_link_label": "Gofile 链接:",
        "pause_button": "暂停",
        "resume_button": "继续",
        "retry_button": "重试",
        "view_log_button": "查看日志",
        "delete_button": "删除",
        "delete_task_confirm": "您确定要删除此任务吗？",
        "change_password_title": "修改密码",
        "current_password_label": "当前密码",
        "new_password_label": "新密码",
        "confirm_password_label": "确认新密码",
        "change_password_button": "修改密码",
        "back_to_downloader": "返回下载器",
        "settings_title": "设置",
        "system_settings_title": "系统设置",
        "save_settings_button": "保存设置",
        "settings_saved_success": "设置保存成功。",
        "settings_update_failed": "设置更新失败。",
        "general_settings_section": "常规设置",
        "storage_services_section": "存储服务",
        "backup_settings_section": "备份与系统设置",
        "login_domain_label": "登录域名 (伪装系统)",
        "private_mode_label": "隐私模式",
        "debug_mode_label": "调试模式",
        "github_token_label": "GitHub 令牌 (用于检查更新)",
        "backup_rclone_base64_label": "Rclone 配置 (Base64)",
        "backup_remote_path_label": "备份远程路径",
        "clear_cache_button": "清理系统缓存",
        "cache_cleared_success": "系统缓存清理成功。",
        "cache_clearing_label": "缓存管理",
        "cache_clearing_text": "手动清理配置、用户和任务状态的内存缓存。",
        "password_changed_success": "密码修改成功。",
        "current_password_incorrect": "当前密码不正确。",
        "passwords_not_match": "新密码和确认密码不匹配。",
        "password_empty": "新密码不能为空。",
        "password_update_failed": "密码更新失败，请重试。",
        "mega_settings_title": "MEGA 设置",
        "mega_email_label": "MEGA 邮箱",
        "mega_password_label": "MEGA 密码",
        "mega_2fa_label": "MEGA 两步验证码 (可选)",
        "mega_2fa_placeholder": "如果启用了两步验证，请输入验证码",
        "login_error": "用户名或密码错误",
        "user_not_found": "用户不存在",
        "password_incorrect": "密码错误",

    }
}

def get_lang(request: Request):
    lang_code = request.cookies.get("lang", "en")
    return LANGUAGES.get(lang_code, LANGUAGES["en"])
